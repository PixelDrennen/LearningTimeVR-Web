<!-- <app-lessonmodule-modal></app-lessonmodule-modal> -->
<div id="fluid-content" class="container-fluid mx-auto">
    <div id="scrollblock"></div>
    <div id="scrollContainer">
        <h3 style="margin-top:20px;">Create a new Class</h3>
        <p>A class holds all of the data pertaining to the class data, such as
            lesson modules and content clusters. Create your class below.</p>

        <form id="classCreatorForm" class="row g-3 align-items-center mx-auto">
            <p id="pageRefreshWarning"><span id="emphasis">i</span>Data entered in the text fields will not be erased if
                you refresh or leave the page.</p>
            <label for="inputTitle" class="col-form-label">Title</label>
            <input name="inputTitle" [(ngModel)]="inputTitle" type="text" id="inputTitle" class="form-control"
                value="Example Title">

            <label for="inputDescription" class="form-label">Description</label>
            <textarea name="inputDescription" [(ngModel)]="inputDescription" rows="5" type="text" id="inputDescription"
                class="form-control" value="Example Description"></textarea>

            <div class="spacer"></div>

            <div>Lesson Modules</div>
            <!-- (click)="addLessonModule()" -->
            <button href="#" class="btn btn-primary" data-bs-target="#lessonModuleModal" data-bs-toggle="modal">Create a
                Lesson Module</button>

            <!-- Lesson Module Container -->
            <div id="fluid-content" class="mx-auto">
                <div class="accordion" id="accordionExample"><!--ngfor loop started for dynamic data -->
                    <div id="scroll-viewport">
                        <div [attr.id]="'lessonModuleSelectable_' + i" [attr.name]="i" class="accordion-item"
                            *ngFor="let lm of lessonModules; let i = index">
                            <h2 class="accordion-header" [id]="'heading'+i">
                                <button class="accordion-button d-flex" [ngClass]="{ 'collapsed': i != 0 }"
                                    type="button" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse'+i"
                                    aria-expanded="true" [attr.aria-controls]="'collapse'+i" style="max-height:50px;">

                                    <div class="d-flex justify-content-between"
                                        style="width:100%; margin:0; margin-top:auto; margin-bottom:auto;">
                                        <p>title: {{lm.title}}</p>
                                        <p style="width:30%; max-height:60%; overflow:hidden;">description...</p>
                                        <div class="d-flex"
                                            style="margin:0; padding:0; margin-top:auto; margin-bottom:auto; padding-right:10px;">
                                            <button class="btn btn-link" href="#"
                                                (click)="OpenLessonModuleEditorModal(i)"
                                                data-bs-target="#lessonModuleModal" data-bs-toggle="modal"
                                                style="margin:10; padding:0; padding-right:10px;">
                                                <div [attr.data-bs-lessonModuleTitle]="lm.title"
                                                    [attr.data-bs-lessonModuleDescription]="lm.description"
                                                    class="material-symbols-outlined" style="margin:0; padding:0;">
                                                    edit
                                                </div>
                                            </button>
                                            <button class="btn btn-link" href="#" style="margin:0; padding:0;">
                                                <div class="material-symbols-outlined" style="margin:0; padding:0;">
                                                    delete
                                                </div>
                                            </button>
                                        </div>

                                    </div>
                                </button>
                            </h2>
                            <div [id]="'collapse'+i" class="accordion-collapse collapse" [ngClass]="{ 'show': i == 0 }"
                                [attr.aria-labelledby]="'heading'+i" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <div class="d-flex mx-auto justify-content-between">
                                        <div class="container-fluid">
                                            <p>Description: {{ lm.description }}</p>

                                            <div class="lm_contentClusters_Container mx-auto row">

                                                <div id="fluid-content" class="mx-auto">
                                                    <div class="accordion" id="ccAccordion">
                                                        <!--ngfor loop started for dynamic data -->
                                                        <div id="scroll-viewport">
                                                            <div [attr.id]="'contentClusterSelectable_' + b"
                                                                [attr.name]="b" class="accordion-item"
                                                                *ngFor="let cc of lm.contentClusters; let b = index">
                                                                <h2 class="accordion-header" [id]="'ccheading'+b">
                                                                    <button class="accordion-button d-flex"
                                                                        [ngClass]="{ 'collapsed': b != 0 }"
                                                                        type="button" data-bs-toggle="collapse"
                                                                        [attr.data-bs-target]="'#cccollapse'+b"
                                                                        aria-expanded="true"
                                                                        [attr.aria-controls]="'cccollapse'+b"
                                                                        style="max-height:50px;">

                                                                        <div class="d-flex justify-content-between"
                                                                            style="width:100%; margin:0; margin-top:auto; margin-bottom:auto;">
                                                                            <p>title: {{cc.title}}</p>
                                                                            <p
                                                                                style="width:30%; max-height:60%; overflow:hidden;">
                                                                                {{trim(cc.description)}}</p>
                                                                            <div class="d-flex"
                                                                                style="margin:0; padding:0; margin-top:auto; margin-bottom:auto; padding-right:10px;">
                                                                                <button class="btn btn-link" href="#"
                                                                                    (click)="OpenLessonModuleEditorModal(i)"
                                                                                    data-bs-target="#lessonModuleModal"
                                                                                    data-bs-toggle="modal"
                                                                                    style="margin:10; padding:0; padding-right:10px;">
                                                                                    <div [attr.data-bs-lessonModuleTitle]="lm.title"
                                                                                        [attr.data-bs-lessonModuleDescription]="lm.description"
                                                                                        class="material-symbols-outlined"
                                                                                        style="margin:0; padding:0;">
                                                                                        edit
                                                                                    </div>
                                                                                </button>
                                                                                <button class="btn btn-link" href="#"
                                                                                    style="margin:0; padding:0;">
                                                                                    <div class="material-symbols-outlined"
                                                                                        style="margin:0; padding:0;">
                                                                                        delete
                                                                                    </div>
                                                                                </button>
                                                                            </div>

                                                                        </div>
                                                                    </button>
                                                                </h2>
                                                                <div [id]="'cccollapse'+b"
                                                                    class="accordion-collapse collapse"
                                                                    [ngClass]="{ 'show': b == 0 }"
                                                                    [attr.aria-labelledby]="'ccheading'+b"
                                                                    data-bs-parent="#ccAccordion">
                                                                    <div class="accordion-body">
                                                                        <div
                                                                            class="d-flex mx-auto justify-content-between">
                                                                            <div class="container-fluid">
                                                                                <p>Description: {{ cc.description }}
                                                                                </p>

                                                                                <div class="lm_contentClusters_Container mx-auto row">

                                                                                    <div id="fluid-content"
                                                                                        class="mx-auto">
                                                                                        <div class="accordion"
                                                                                            id="ccAccordion">
                                                                                            <!--ngfor loop started for dynamic data -->
                                                                                            <div *ngFor="let content of lm.contentClusters;">
                                                                                                Title: {{content.title}}<br />
                                                                                                Description: {{content.description}}<br />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="lm_contentCluster"
                                                                                    *ngIf="lm.contentClusters == null || lm.contentClusters.length == 0">
                                                                                    No content clusters yet
                                                                                </div>
                                                                                <button class="btn btn-primary" href="#"
                                                                                    data-bs-target="#contentModal"
                                                                                    data-bs-toggle="modal"
                                                                                    >Create
                                                                                    <!-- (click)="OpenContentEditor(i)" -->
                                                                                    a Content
                                                                                    Block</button>
                                                                            </div>

                                                                            <div class="mx-auto row">

                                                                            </div>

                                                                            <div class="metaData">
                                                                                <h4 class="metaDataHeader">Meta
                                                                                    Data</h4>
                                                                                <div class="metaDataBody container-fluid lmMetaDataView"
                                                                                    style="min-height:50px;">
                                                                                    Creator: {{ cc.creatorName
                                                                                    }}<br />
                                                                                    Header: {{ cc.header
                                                                                    }}<br />
                                                                                    Tags: {{ cc.tags }}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="lm_contentCluster"
                                                    *ngIf="lm.contentClusters == null || lm.contentClusters.length == 0">
                                                    No content clusters yet
                                                </div>
                                                <button class="btn btn-primary" href="#"
                                                    data-bs-target="#contentClusterModal" data-bs-toggle="modal"
                                                    (click)="OpenContentClusterEditor(i)">Create
                                                    a Content
                                                    Cluster</button>
                                            </div>
                                            <div class="mx-auto row">

                                            </div>

                                            <div class="metaData">
                                                <h4 class="metaDataHeader">Meta Data</h4>
                                                <div class="metaDataBody container-fluid lmMetaDataView"
                                                    style="min-height:50px;">
                                                    Creator: {{ lm.creatorName }}<br />
                                                    Created: {{ lm.dateCreated }}<br />
                                                    Updated: {{ lm.dateUpdated }}<br />
                                                    Header: {{ lm.header }}<br />
                                                    Tags: {{ lm.tags }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="spacer"></div>

            <div>Assign Students</div>
            <button href="#" class="btn btn-primary">Add New</button>

            <div class="spacer"></div>

            <div>Assign Teachers</div>
            <button href="#" class="btn btn-primary">Add New</button>

            <div class="spacer"></div>

            <div>Setup Schedule</div>
            <!-- 1. inline datepicker -->

            <!-- [(ngModel)]="model" -->
            <!-- <ngb-datepicker [showWeekNumbers]="true"></ngb-datepicker> -->
            <div id="calendar"></div>

            <!-- <div class="spacer"></div> -->
            <div class="spacer"></div>

            <div>Tags</div>
            <input name="inputTags" [(ngModel)]="inputTags" type="text" placeholder="Example Tag 1, Example Tag 2"
                class="form-control">
            <p>Separate tags with a comma</p>
            <div>Header</div>
            <input name="inputHeader" [(ngModel)]="inputHeader" type="text" placeholder="Header" class="form-control"
                value="Example Header">

            <div>Location ID</div>
            <input name="inputLocation" [(ngModel)]="inputLocation" type="text" placeholder="Location"
                class="form-control" value="Example Location">

            <div class="spacer"></div>

            <div>
                <label>Preview Sprite</label>
                <p>This will be used as the preview for this lesson module.</p>
                <input [ngModel]="cformInput_previewSprite" type="file" class="form-control" id="imgPicker"
                    name="cformInput_previewSprite">
            </div>

            <div class="spacer"></div>

            <button (click)="saveCreatedClass()" class="btn btn-primary">Save Class</button>
        </form>
    </div>

    <!-- Lesson Module Editor Modal -->
    <div class="modal fade" id="lessonModuleModal" tabindex="-1" aria-labelledby="lessonModuleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lessonModuleModalLabel">Add New Lesson Module</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <style>
                        .lmformInput {
                            margin-bottom: 5px;
                        }

                        .modal-content .spacer {
                            border: solid 1px rgba(0, 0, 100, .2);
                            background: none;
                            height: 2px;
                            width: 100%;
                            margin-top: 30px;
                            margin-bottom: 30px;
                        }
                    </style>

                    <input [(ngModel)]="lmformInput_title" id="lmformInput_title" type="text"
                        class="form-control lmformInput" placeholder="Title" name="lmformInput_title"
                        id="input_LM_Title">

                    <input [(ngModel)]="lmformInput_description" type="text" class="form-control lmformInput"
                        placeholder="Description" name="lmformInput_description" id="input_LM_Description">

                    <input [(ngModel)]="lmformInput_header" type="text" class="form-control lmformInput"
                        placeholder="Header" name="lmformInput_header" id="input_LM_Header">

                    <input [(ngModel)]="lmformInput_tags" type="text" class="form-control lmformInput"
                        placeholder="Tag1, Tag2, etc." name="lmformInput_tags" id="input_LM_Tags">

                    <div class="spacer"></div>

                    <form [formGroup]="locationGroup">
                        <div class="container-fluid d-flex col">
                            <div class="btn-group-vertical" role="group" aria-label="Basic example" style="margin:auto;"
                                name="lmformInput_location">
                                <input type="radio" class="btn-check" formControlName="lmformInput_location"
                                    name="lmformInput_location" id="location1" autocomplete="off" checked value=0>
                                <label class="btn btn-outline-primary" for="location1">Location 1</label>
                                <input type="radio" class="btn-check" formControlName="lmformInput_location"
                                    name="lmformInput_location" id="location2" autocomplete="off" value=1>
                                <label class="btn btn-outline-primary" for="location2">Location 2</label>
                                <input type="radio" class="btn-check" formControlName="lmformInput_location"
                                    name="lmformInput_location" id="location3" autocomplete="off" value=2>
                                <label class="btn btn-outline-primary" for="location3">Location 3</label>
                            </div>
                            <div class="container-fluid row" style="margin:auto;">
                                <p>The location you choose will determine where this Lesson Module takes place in VR.
                                </p>
                                <p>Suggestion: Preview video or thumbnail snapshot here for each loaction.</p>
                            </div>
                        </div>
                    </form>

                    <div class="spacer"></div>

                    <div>
                        <label>Preview Sprite</label>
                        <p>This will be used as the preview for this Lesson Module.</p>
                        <input [ngModel]="lmformInput_previewSprite" type="file" class="form-control lmformInput"
                            id="imgPicker" name="lmformInput_previewSprite">
                    </div>

                    <div class="spacer"></div>

                    <p>You can add Content Clusters after you click the "Add" button to save this Lesson Module.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" (click)="AddLessonModule()"
                        data-bs-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Cluster Editor Modal -->
    <div class="modal fade" id="contentClusterModal" tabindex="-1" aria-labelledby="contentClusterModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contentClusterModalLabel">Add New Content Cluster</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <style>
                        .ccformInput {
                            margin-bottom: 5px;
                        }

                        .modal-content .spacer {
                            border: solid 1px rgba(0, 0, 100, .2);
                            background: none;
                            height: 2px;
                            width: 100%;
                            margin-top: 30px;
                            margin-bottom: 30px;
                        }
                    </style>

                    <input [(ngModel)]="ccformInput_title" id="ccformInput_title" type="text"
                        class="form-control ccformInput" placeholder="Title" name="ccformInput_title">

                    <input [(ngModel)]="ccformInput_description" id="ccformInput_description" type="text"
                        class="form-control ccformInput" placeholder="Description" name="ccformInput_description">

                    <input [(ngModel)]="ccformInput_header" id="ccformInput_header" type="text"
                        class="form-control ccformInput" placeholder="Header" name="ccformInput_header">

                    <div class="spacer"></div>

                    <label for="ccformInput_transFrom">Transition Type From: (0 = fade)</label>
                    <input [(ngModel)]="ccformInput_transFrom" id="ccformInput_transFrom" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_transFrom">

                    <label for="ccformInput_transTo">Transition Type To: (0 = fade)</label>
                    <input [(ngModel)]="ccformInput_transTo" id="ccformInput_transTo" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_transTo">

                    <div class="spacer"></div>

                    <h4>Meta Data</h4>

                    <input [(ngModel)]="ccformInput_creatorName" id="ccformInput_creatorName" type="text"
                        class="form-control ccformInput" placeholder="Creator" name="ccformInput_creatorName">

                    <input [(ngModel)]="ccformInput_tags" id="ccformInput_tags" type="text"
                        class="form-control ccformInput" placeholder="Tag1, Tag2, etc." name="ccformInput_tags">

                    <label for="ccformInput_transTo">Starting Location</label>
                    <input [(ngModel)]="ccformInput_startingLocation" id="ccformInput_startingLocation" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_startingLocation">
                    <div class="spacer"></div>

                    <div>
                        <label>Preview Sprite</label>
                        <p>This will be used as the preview for this lesson module.</p>
                        <input [ngModel]="ccformInput_previewSprite" type="file" class="form-control lmformInput"
                            id="imgPicker" name="ccformInput_previewSprite">
                    </div>

                    <div class="spacer"></div>

                    <p>You can add Content after you click the "Add" button to save this Content Cluster.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="CloseEditAndCancel()"
                        data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" (click)="AddContentCluster()"
                        data-bs-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="contentModal" tabindex="-1" aria-labelledby="contentModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contentModalLabel">Add New Content Block</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <style>
                        .ccformInput {
                            margin-bottom: 5px;
                        }
    
                        .modal-content .spacer {
                            border: solid 1px rgba(0, 0, 100, .2);
                            background: none;
                            height: 2px;
                            width: 100%;
                            margin-top: 30px;
                            margin-bottom: 30px;
                        }
                    </style>
    
                    <input [(ngModel)]="ccformInput_title" id="ccformInput_title" type="text"
                        class="form-control ccformInput" placeholder="Title" name="ccformInput_title">
    
                    <input [(ngModel)]="ccformInput_description" id="ccformInput_description" type="text"
                        class="form-control ccformInput" placeholder="Description" name="ccformInput_description">
    
                    <input [(ngModel)]="ccformInput_header" id="ccformInput_header" type="text"
                        class="form-control ccformInput" placeholder="Header" name="ccformInput_header">
    
                    <div class="spacer"></div>
    
                    <label for="ccformInput_transFrom">Transition Type From: (0 = fade)</label>
                    <input [(ngModel)]="ccformInput_transFrom" id="ccformInput_transFrom" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_transFrom">
    
                    <label for="ccformInput_transTo">Transition Type To: (0 = fade)</label>
                    <input [(ngModel)]="ccformInput_transTo" id="ccformInput_transTo" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_transTo">
    
                    <div class="spacer"></div>
    
                    <h4>Meta Data</h4>
    
                    <input [(ngModel)]="ccformInput_creatorName" id="ccformInput_creatorName" type="text"
                        class="form-control ccformInput" placeholder="Creator" name="ccformInput_creatorName">
    
                    <input [(ngModel)]="ccformInput_tags" id="ccformInput_tags" type="text" class="form-control ccformInput"
                        placeholder="Tag1, Tag2, etc." name="ccformInput_tags">
    
                    <label for="ccformInput_transTo">Starting Location</label>
                    <input [(ngModel)]="ccformInput_startingLocation" id="ccformInput_startingLocation" type="number"
                        class="form-control ccformInput" placeholder="0" name="ccformInput_startingLocation">
                    <div class="spacer"></div>
    
                    <div>
                        <label>Preview Sprite</label>
                        <p>This will be used as the preview for this lesson module.</p>
                        <input [ngModel]="ccformInput_previewSprite" type="file" class="form-control lmformInput"
                            id="imgPicker" name="ccformInput_previewSprite">
                    </div>
    
                    <div class="spacer"></div>
    
                    <p>You can add Content after you click the "Add" button to save this Content Cluster.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="CloseEditAndCancel()"
                        data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" (click)="AddContentCluster()"
                        data-bs-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="toast-container">
        <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <img src="..." class="rounded me-2" alt="...">
                <strong class="me-auto">Bootstrap</strong>
                <small class="text-muted">2 seconds ago</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Heads up, toasts will stack automatically
            </div>
        </div>
    </div>